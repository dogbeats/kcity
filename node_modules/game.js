//MAIN GAME THREAD SERVER-SIDE

const PlayerHandler = require('PlayerHandler');
const CommandHandler = require('CommandHandler');

class Game
{
	constructor(){
		this._playerHandler = new PlayerHandler();
		this._commandHandler = new CommandHandler();
		this._FPS = 30;
		this._state = 0;
		this._clients = [];
	}

	initialise()
	{
		this._commandHandler.registerCommand("::demo", "Demo", 2, function(args){console.log("Dummy Command")});
		this._state = 1;
		//this.onInitialise("Success");
	}
	
	addPlayer(id, username, rank, sid)
	{
		playerHandler.addPlayer(id, username, rank, sid);
	}

	updatePlayer(playerObj)
	{
		
	}
	
	getPlayer(playerID)
	{
		return playerHandler.getPlayer(playerID);
	}
	
	getPlayerHandler()
	{
		return this._playerHandler;
	}
	
	getCommandHandler()
	{
		return this._commandHandler;
	}
	
	clearPlayer(playerID)
	{
		this._playerHandler.clearPlayer(playerID);
	}

	registerClient(client)
	{
		clients.push(client);
	}
	
	getState()
	{
		return this._state;
	}

	mainLoop()
	{
		while (this._state == 1)
		{
			this._state = 0;
		}
	}
}

module.exports = Game;
